{
  "datapackage": {
    "title": "Bindfit",
    "description": "Binding constant fitter",
    "algorithms": [
      {
        "name": "bindfit",
        "title": "Bindfit",
        "code": "ZGVmIG1haW4oCiAgICBkYXRhLAogICAgcGFyYW1zLAogICAgb3B0aW9ucywKICAgICoqa3dhcmdzLAopOgogICAgaW1wb3J0IG51bXB5IGFzIG5wCiAgICBpbXBvcnQgcGFuZGFzIGFzIHBkCgogICAgaW1wb3J0IGJpbmRmaXQKCgogICAgIyBDb252ZXJ0IHBhcmFtcyB0byBCaW5kZml0IGZvcm1hdAogICAgIyBUT0RPOiBNb2RpZnkgbGlicmFyeSB0byBhY2NlcHQgRnJpY3Rpb25sZXNzIHBhcmFtcyBmb3JtYXQKICAgIGJpbmRmaXRfcGFyYW1zID0ge30KCiAgICBmb3Iga2V5LCBwYXJhbSBpbiBwYXJhbXNbImRhdGEiXS5pdGVtcygpOgogICAgICAgIGJpbmRmaXRfcGFyYW1zLnVwZGF0ZSh7CiAgICAgICAgICAgIGtleTogewogICAgICAgICAgICAgICAgImluaXQiOiBwYXJhbVsidmFsdWUiXSwKICAgICAgICAgICAgICAgICJib3VuZHMiOiB7CiAgICAgICAgICAgICAgICAgICAgIm1pbiI6IHBhcmFtWyJsb3dlckJvdW5kIl0sCiAgICAgICAgICAgICAgICAgICAgIm1heCI6IHBhcmFtWyJ1cHBlckJvdW5kIl0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAjIEJpbmRmaXQgb3B0aW9ucwogICAgbW9kZWwgPSBvcHRpb25zWyJkYXRhIl1bIm1vZGVsIl0KICAgIG1ldGhvZCA9IG9wdGlvbnNbImRhdGEiXVsibWV0aG9kIl0KICAgIG5vcm1hbGlzZSA9IG9wdGlvbnNbImRhdGEiXVsibm9ybWFsaXNlIl0KICAgIGRpbHV0ZSA9IG9wdGlvbnNbImRhdGEiXVsiZGlsdXRlIl0KICAgIGZsYXZvdXIgPSBvcHRpb25zWyJkYXRhIl1bImZsYXZvdXIiXQoKICAgICMgTG9hZCBkYXRhCiAgICBkZiA9IHBkLkRhdGFGcmFtZS5mcm9tX2RpY3QoZGF0YVsiZGF0YSJdKQogICAgIyBCaW5kZml0IGV4cGVjdHMgZWFjaCB2YXJpYWJsZSBhcyByb3dzCiAgICBkYXRhX3ggPSBucC50cmFuc3Bvc2UoZGYuaWxvY1s6LCA6Ml0udG9fbnVtcHkoKSkKICAgIGRhdGFfeSA9IG5wLnRyYW5zcG9zZShkZi5pbG9jWzosIDI6XS50b19udW1weSgpKQoKICAgICMgQXBwbHkgZGlsdXRpb24gY29ycmVjdGlvbgogICAgIyBUT0RPOiBUaGluayBhYm91dCB3aGVyZSB0aGlzIHNob3VsZCBnbyAtIGZpdHRlciBvciBmdW5jdGlvbj8KICAgICMgT3IganVzdCBhcHBseSBpdCBiZWZvcmUgdGhlIGZpdD8KICAgIGlmIGRpbHV0ZToKICAgICAgICBkYXRhX3kgPSBiaW5kZml0LmhlbHBlcnMuZGlsdXRlKGRhdGFfeFswXSwgZGF0YV95KQoKICAgIGZ1bmN0aW9uID0gYmluZGZpdC5mdW5jdGlvbnMuY29uc3RydWN0KAogICAgICAgIG1vZGVsLAogICAgICAgIG5vcm1hbGlzZT1ub3JtYWxpc2UsCiAgICAgICAgZmxhdm91cj1mbGF2b3VyLAogICAgKQoKICAgIGZpdHRlciA9IGJpbmRmaXQuZml0dGVyLkZpdHRlcigKICAgICAgICBkYXRhX3gsIGRhdGFfeSwgZnVuY3Rpb24sIG5vcm1hbGlzZT1ub3JtYWxpc2UsIHBhcmFtcz1iaW5kZml0X3BhcmFtcwogICAgKQoKICAgIGZpdHRlci5ydW5fc2NpcHkoYmluZGZpdF9wYXJhbXMsIG1ldGhvZD1tZXRob2QpCgogICAgc3VtbWFyeSA9IHsKICAgICAgICAiZml0dGVyIjogbW9kZWwsCiAgICAgICAgImZpdCI6IHsKICAgICAgICAgICAgInkiOiBmaXR0ZXIuZml0LAogICAgICAgICAgICAiY29lZmZzX3JhdyI6IGZpdHRlci5jb2VmZnNfcmF3LAogICAgICAgICAgICAiY29lZmZzIjogZml0dGVyLmNvZWZmcywKICAgICAgICAgICAgIm1vbGVmcmFjX3JhdyI6IGZpdHRlci5tb2xlZnJhY19yYXcsCiAgICAgICAgICAgICJtb2xlZnJhYyI6IGZpdHRlci5tb2xlZnJhYywKICAgICAgICAgICAgInBhcmFtcyI6IGZpdHRlci5wYXJhbXMsCiAgICAgICAgICAgICJuX3kiOiBucC5hcnJheShmaXR0ZXIuZml0KS5zaXplLAogICAgICAgICAgICAibl9wYXJhbXMiOiBsZW4oZml0dGVyLnBhcmFtcykgKyBucC5hcnJheShmaXR0ZXIuY29lZmZzX3Jhdykuc2l6ZSwKICAgICAgICB9LAogICAgICAgICJxb2YiOiB7CiAgICAgICAgICAgICJyZXNpZHVhbHMiOiBmaXR0ZXIucmVzaWR1YWxzLAogICAgICAgICAgICAic3NyIjogYmluZGZpdC5oZWxwZXJzLnNzcihmaXR0ZXIucmVzaWR1YWxzKSwKICAgICAgICAgICAgInJtcyI6IGJpbmRmaXQuaGVscGVycy5ybXMoZml0dGVyLnJlc2lkdWFscyksCiAgICAgICAgICAgICJjb3YiOiBiaW5kZml0LmhlbHBlcnMuY292KGRhdGFfeSwgZml0dGVyLnJlc2lkdWFscyksCiAgICAgICAgICAgICJybXNfdG90YWwiOiBiaW5kZml0LmhlbHBlcnMucm1zKGZpdHRlci5yZXNpZHVhbHMsIHRvdGFsPVRydWUpLAogICAgICAgICAgICAiY292X3RvdGFsIjogYmluZGZpdC5oZWxwZXJzLmNvdihkYXRhX3ksIGZpdHRlci5yZXNpZHVhbHMsIHRvdGFsPVRydWUpLAogICAgICAgIH0sCiAgICAgICAgInRpbWUiOiBmaXR0ZXIudGltZSwKICAgICAgICAib3B0aW9ucyI6IHsKICAgICAgICAgICAgImRpbHV0ZSI6IGRpbHV0ZSwKICAgICAgICAgICAgIm5vcm1hbGlzZSI6IG5vcm1hbGlzZSwKICAgICAgICAgICAgIm1ldGhvZCI6IG1ldGhvZCwKICAgICAgICAgICAgImZsYXZvdXIiOiBmbGF2b3VyLAogICAgICAgIH0sCiAgICB9CgogICAgcmV0dXJuIHN1bW1hcnkK",
        "inputs": [
          {
            "name": "data",
            "type": "resource",
            "resource": "data"
          },
          {
            "name": "params",
            "type": "resource",
            "resource": "inputParams"
          },
          {
            "name": "options",
            "type": "resource",
            "resource": "options"
          }
        ],
        "outputs": [
          {
            "name": "params",
            "type": "resource",
            "resource": "outputParams"
          }
        ]
      }
    ],
    "resources": [
      {
        "name": "data",
        "title": "Data",
        "description": "Input data",
        "profile": "tabular-data-resource",
        "data": [
          {
            "Host": 0.000776,
            "Guest": 0.0,
            "Proton 1": 0.0,
            "Proton 2": 0.0,
            "Proton 3": 0.0,
            "Proton 4": 0.0
          },
          {
            "Host": 0.000776,
            "Guest": 9.70537e-05,
            "Proton 1": -0.0039,
            "Proton 2": -0.0005,
            "Proton 3": 0.0007,
            "Proton 4": 0.0002
          },
          {
            "Host": 0.000776,
            "Guest": 0.000193437,
            "Proton 1": -0.0074,
            "Proton 2": -0.001,
            "Proton 3": 0.0024,
            "Proton 4": 0.0012
          },
          {
            "Host": 0.000776,
            "Guest": 0.000289157,
            "Proton 1": -0.0113,
            "Proton 2": -0.0015,
            "Proton 3": 0.00365,
            "Proton 4": 0.0017
          },
          {
            "Host": 0.000776,
            "Guest": 0.00038422,
            "Proton 1": -0.0147,
            "Proton 2": -0.002,
            "Proton 3": 0.0044,
            "Proton 4": 0.00195
          },
          {
            "Host": 0.000776,
            "Guest": 0.000478632,
            "Proton 1": -0.0176,
            "Proton 2": -0.0025,
            "Proton 3": 0.00535,
            "Proton 4": 0.0022
          },
          {
            "Host": 0.000776,
            "Guest": 0.000572402,
            "Proton 1": -0.021,
            "Proton 2": -0.0029,
            "Proton 3": 0.00605,
            "Proton 4": 0.0027
          },
          {
            "Host": 0.000776,
            "Guest": 0.000665535,
            "Proton 1": -0.0245,
            "Proton 2": -0.0034,
            "Proton 3": 0.00655,
            "Proton 4": 0.00295
          },
          {
            "Host": 0.000776,
            "Guest": 0.000758037,
            "Proton 1": -0.0274,
            "Proton 2": -0.0039,
            "Proton 3": 0.00755,
            "Proton 4": 0.0032
          },
          {
            "Host": 0.000776,
            "Guest": 0.000849916,
            "Proton 1": -0.0299,
            "Proton 2": -0.0034,
            "Proton 3": 0.00855,
            "Proton 4": 0.0039
          },
          {
            "Host": 0.000776,
            "Guest": 0.000941176,
            "Proton 1": -0.0328,
            "Proton 2": -0.0044,
            "Proton 3": 0.00925,
            "Proton 4": 0.0041
          },
          {
            "Host": 0.000776,
            "Guest": 0.001076923,
            "Proton 1": -0.0362,
            "Proton 2": -0.0049,
            "Proton 3": 0.0102,
            "Proton 4": 0.00435
          },
          {
            "Host": 0.000776,
            "Guest": 0.001255814,
            "Proton 1": -0.0411,
            "Proton 2": -0.0059,
            "Proton 3": 0.0117,
            "Proton 4": 0.00485
          },
          {
            "Host": 0.000776,
            "Guest": 0.001476112,
            "Proton 1": -0.0465,
            "Proton 2": -0.0064,
            "Proton 3": 0.01315,
            "Proton 4": 0.0056
          },
          {
            "Host": 0.000776,
            "Guest": 0.001778502,
            "Proton 1": -0.0528,
            "Proton 2": -0.0074,
            "Proton 3": 0.0151,
            "Proton 4": 0.00635
          },
          {
            "Host": 0.000776,
            "Guest": 0.002198718,
            "Proton 1": -0.0611,
            "Proton 2": -0.0093,
            "Proton 3": 0.0171,
            "Proton 4": 0.00685
          },
          {
            "Host": 0.000776,
            "Guest": 0.002804382,
            "Proton 1": -0.0699,
            "Proton 2": -0.0103,
            "Proton 3": 0.0205,
            "Proton 4": 0.0083
          },
          {
            "Host": 0.000776,
            "Guest": 0.003569044,
            "Proton 1": -0.0797,
            "Proton 2": -0.0118,
            "Proton 3": 0.0234,
            "Proton 4": 0.0095
          },
          {
            "Host": 0.000776,
            "Guest": 0.004632801,
            "Proton 1": -0.09,
            "Proton 2": -0.0132,
            "Proton 3": 0.0273,
            "Proton 4": 0.01125
          },
          {
            "Host": 0.000776,
            "Guest": 0.006213802,
            "Proton 1": -0.1012,
            "Proton 2": -0.0147,
            "Proton 3": 0.0317,
            "Proton 4": 0.01315
          },
          {
            "Host": 0.000776,
            "Guest": 0.008810489,
            "Proton 1": -0.1139,
            "Proton 2": -0.0171,
            "Proton 3": 0.03565,
            "Proton 4": 0.0144
          },
          {
            "Host": 0.000776,
            "Guest": 0.012504331,
            "Proton 1": -0.1237,
            "Proton 2": -0.0181,
            "Proton 3": 0.04055,
            "Proton 4": 0.0169
          }
        ],
        "schema": {
          "primaryKey": "H",
          "fields": [
            {
              "name": "H",
              "type": "number",
              "title": "",
              "unit": ""
            },
            {
              "name": "G",
              "type": "number",
              "title": "",
              "unit": ""
            }
          ]
        },
        "fields": [
          {
            "name": "Host",
            "title": "Host",
            "unit": "",
            "type": "number"
          },
          {
            "name": "Guest",
            "title": "Guest",
            "unit": "",
            "type": "number"
          },
          {
            "name": "Proton 1",
            "title": "Proton 1",
            "unit": "",
            "type": "number"
          },
          {
            "name": "Proton 2",
            "title": "Proton 2",
            "unit": "",
            "type": "number"
          },
          {
            "name": "Proton 3",
            "title": "Proton 3",
            "unit": "",
            "type": "number"
          },
          {
            "name": "Proton 4",
            "title": "Proton 4",
            "unit": "",
            "type": "number"
          }
        ]
      },
      {
        "name": "inputParams",
        "title": "Input parameters",
        "description": "Initial parameter values",
        "profile": "parameter-data-resource",
        "data": {
          "k": {
            "vary": true,
            "value": 100,
            "lowerBound": 0,
            "upperBound": null
          }
        },
        "schema": {
          "keys": [
            {
              "name": "k",
              "unit": "M^{-1}",
              "fields": [
                {
                  "name": "vary",
                  "title": "Vary",
                  "type": "boolean"
                },
                {
                  "name": "value",
                  "title": "Value",
                  "type": "number"
                },
                {
                  "name": "lowerBound",
                  "title": "Lower bound",
                  "type": "number"
                },
                {
                  "name": "upperBound",
                  "title": "Upper bound",
                  "type": "number"
                }
              ]
            }
          ]
        }
      },
      {
        "name": "outputParams",
        "title": "Optimised parameters",
        "description": "Optimised parameter values",
        "profile": "parameter-data-resource"
      },
      {
        "name": "options",
        "title": "Fit options",
        "description": "Fit options",
        "profile": "options-data-resource",
        "data": {
          "model": "nmr1to1",
          "method": "Nelder-Mead",
          "normalise": true,
          "dilute": false,
          "flavour": "none"
        },
        "schema": {
          "fields": [
            {
              "name": "model",
              "title": "Fit model",
              "description": "The model to fit to the data",
              "type": "object",
              "objectFields": [
                {
                  "name": "title",
                  "type": "string"
                },
                {
                  "name": "name",
                  "type": "string"
                }
              ],
              "constraints": {
                "enum": [
                  {
                    "title": "NMR 1:1",
                    "name": "nmr1to1"
                  }
                ]
              }
            },
            {
              "name": "method",
              "title": "Fit method",
              "description": "The optimisation method to use for fitting",
              "type": "object",
              "objectFields": [
                {
                  "name": "title",
                  "type": "string"
                },
                {
                  "name": "name",
                  "type": "string"
                }
              ],
              "constraints": {
                "enum": [
                  {
                    "title": "Nelder-Mead",
                    "name": "Nelder-Mead"
                  },
                  {
                    "title": "L-BFGS-B",
                    "name": "L-BFGS-B"
                  }
                ]
              }
            },
            {
              "name": "normalise",
              "title": "Subtract initial values",
              "description": "Subtract initial values from data before fitting",
              "type": "boolean"
            },
            {
              "name": "dilute",
              "title": "Dilution correction",
              "description": "Apply dilution correction to data",
              "type": "boolean"
            },
            {
              "name": "flavour",
              "title": "Flavour",
              "description": "Fitting algorithm flavour",
              "type": "object",
              "objectFields": [
                {
                  "name": "title",
                  "type": "string"
                },
                {
                  "name": "name",
                  "type": "string"
                }
              ],
              "constraints": {
                "enum": [
                  {
                    "title": "None (Full)",
                    "name": "none"
                  },
                  {
                    "title": "Non-cooperative",
                    "name": "noncoop"
                  },
                  {
                    "title": "Additive",
                    "name": "add"
                  },
                  {
                    "title": "Statistical",
                    "name": "stat"
                  }
                ]
              }
            }
          ]
        }
      }
    ],
    "views": [
      {
        "name": "data",
        "specType": "opendatafit-csv",
        "spec": {},
        "resources": [
          "data"
        ]
      },
      {
        "name": "params",
        "title": "Parameters",
        "specType": "opendatafit-params",
        "spec": {
          "keys": [
            {
              "name": "k"
            }
          ]
        },
        "resources": [
          "inputParams",
          "outputParams"
        ]
      }
    ],
    "displays": [
      {
        "name": "main",
        "algorithms": [
          "nmr11"
        ],
        "layout": {
          "type": "bindfit",
          "spec": {
            "panes": [
              {
                "name": "control",
                "tabs": [
                  "data",
                  "params"
                ]
              },
              {
                "name": "main",
                "tabs": []
              }
            ],
            "tabs": [
              {
                "name": "data",
                "title": "Data",
                "icon": "",
                "views": [
                  "data"
                ]
              },
              {
                "name": "params",
                "title": "Parameters",
                "icon": "",
                "views": [
                  "params"
                ]
              }
            ]
          }
        }
      }
    ]
  },
  "algorithm": "bindfit"
}