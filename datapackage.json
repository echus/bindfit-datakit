{
  "title": "Bindfit",
  "description": "Binding constant fitter",
  "algorithms": [
    {
      "name": "bindfit",
      "title": "Bindfit",
      "code": "ZGVmIG1haW4oCiAgICAjIGRhdGEsCiAgICAjIHBhcmFtcywKICAgICMgb3B0aW9ucywKICAgICoqa3dhcmdzLAopOgogICAgaW1wb3J0IG51bXB5IGFzIG5wCgogICAgaW1wb3J0IGJpbmRmaXQKCiAgICAjIFBhcmFtZXRlcnMgYW5kIG9wdGlvbnMKICAgIHBhcmFtcyA9IHsKICAgICAgICAiayI6IHsKICAgICAgICAgICAgImluaXQiOiAxMDAuMCwKICAgICAgICAgICAgImJvdW5kcyI6IHsKICAgICAgICAgICAgICAgICJtaW4iOiAwLjAsCiAgICAgICAgICAgICAgICAibWF4IjogTm9uZSwKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgfQoKICAgIGZpdHRlcl9uYW1lID0gIm5tcjF0bzEiCiAgICBtZXRob2QgPSAiTmVsZGVyLU1lYWQiCiAgICBub3JtYWxpc2UgPSBUcnVlCiAgICBkaWx1dGUgPSBGYWxzZQogICAgZmxhdm91ciA9ICJub25lIgoKICAgICMgTG9hZCByYXcgZGF0YQogICAgZGF0YSA9IG5wLmdlbmZyb210eHQoImlucHV0LmNzdiIsIGRlbGltaXRlcj0iLCIsIHNraXBfaGVhZGVyPTEpCiAgICAjIEJpbmRmaXQgZXhwZWN0cyBlYWNoIHZhcmlhYmxlIGFzIHJvd3MKICAgIGRhdGFfeCA9IG5wLnRyYW5zcG9zZShkYXRhWzosIDoyXSkKICAgIGRhdGFfeSA9IG5wLnRyYW5zcG9zZShkYXRhWzosIDI6XSkKCiAgICAjIEFwcGx5IGRpbHV0aW9uIGNvcnJlY3Rpb24KICAgICMgVE9ETzogVGhpbmsgYWJvdXQgd2hlcmUgdGhpcyBzaG91bGQgZ28gLSBmaXR0ZXIgb3IgZnVuY3Rpb24/CiAgICAjIE9yIGp1c3QgYXBwbHkgaXQgYmVmb3JlIHRoZSBmaXQ/CiAgICBpZiBkaWx1dGU6CiAgICAgICAgZGF0YV95ID0gYmluZGZpdC5oZWxwZXJzLmRpbHV0ZShkYXRhX3hbMF0sIGRhdGFfeSkKCiAgICBmdW5jdGlvbiA9IGJpbmRmaXQuZnVuY3Rpb25zLmNvbnN0cnVjdCgKICAgICAgICBmaXR0ZXJfbmFtZSwKICAgICAgICBub3JtYWxpc2U9bm9ybWFsaXNlLAogICAgICAgIGZsYXZvdXI9Zmxhdm91ciwKICAgICkKCiAgICBmaXR0ZXIgPSBiaW5kZml0LmZpdHRlci5GaXR0ZXIoCiAgICAgICAgZGF0YV94LCBkYXRhX3ksIGZ1bmN0aW9uLCBub3JtYWxpc2U9bm9ybWFsaXNlLCBwYXJhbXM9cGFyYW1zCiAgICApCgogICAgZml0dGVyLnJ1bl9zY2lweShwYXJhbXMsIG1ldGhvZD1tZXRob2QpCgogICAgc3VtbWFyeSA9IHsKICAgICAgICAiZml0dGVyIjogZml0dGVyX25hbWUsCiAgICAgICAgImZpdCI6IHsKICAgICAgICAgICAgInkiOiBmaXR0ZXIuZml0LAogICAgICAgICAgICAiY29lZmZzX3JhdyI6IGZpdHRlci5jb2VmZnNfcmF3LAogICAgICAgICAgICAiY29lZmZzIjogZml0dGVyLmNvZWZmcywKICAgICAgICAgICAgIm1vbGVmcmFjX3JhdyI6IGZpdHRlci5tb2xlZnJhY19yYXcsCiAgICAgICAgICAgICJtb2xlZnJhYyI6IGZpdHRlci5tb2xlZnJhYywKICAgICAgICAgICAgInBhcmFtcyI6IGZpdHRlci5wYXJhbXMsCiAgICAgICAgICAgICJuX3kiOiBucC5hcnJheShmaXR0ZXIuZml0KS5zaXplLAogICAgICAgICAgICAibl9wYXJhbXMiOiBsZW4oZml0dGVyLnBhcmFtcykgKyBucC5hcnJheShmaXR0ZXIuY29lZmZzX3Jhdykuc2l6ZSwKICAgICAgICB9LAogICAgICAgICJxb2YiOiB7CiAgICAgICAgICAgICJyZXNpZHVhbHMiOiBmaXR0ZXIucmVzaWR1YWxzLAogICAgICAgICAgICAic3NyIjogYmluZGZpdC5oZWxwZXJzLnNzcihmaXR0ZXIucmVzaWR1YWxzKSwKICAgICAgICAgICAgInJtcyI6IGJpbmRmaXQuaGVscGVycy5ybXMoZml0dGVyLnJlc2lkdWFscyksCiAgICAgICAgICAgICJjb3YiOiBiaW5kZml0LmhlbHBlcnMuY292KGRhdGFfeSwgZml0dGVyLnJlc2lkdWFscyksCiAgICAgICAgICAgICJybXNfdG90YWwiOiBiaW5kZml0LmhlbHBlcnMucm1zKGZpdHRlci5yZXNpZHVhbHMsIHRvdGFsPVRydWUpLAogICAgICAgICAgICAiY292X3RvdGFsIjogYmluZGZpdC5oZWxwZXJzLmNvdihkYXRhX3ksIGZpdHRlci5yZXNpZHVhbHMsIHRvdGFsPVRydWUpLAogICAgICAgIH0sCiAgICAgICAgInRpbWUiOiBmaXR0ZXIudGltZSwKICAgICAgICAib3B0aW9ucyI6IHsKICAgICAgICAgICAgImRpbHV0ZSI6IGRpbHV0ZSwKICAgICAgICAgICAgIm5vcm1hbGlzZSI6IG5vcm1hbGlzZSwKICAgICAgICAgICAgIm1ldGhvZCI6IG1ldGhvZCwKICAgICAgICAgICAgImZsYXZvdXIiOiBmbGF2b3VyLAogICAgICAgIH0sCiAgICB9CgogICAgcmV0dXJuIHN1bW1hcnkK",
      "inputs": [
        {
          "name": "data",
          "type": "resource",
          "resource": "data"
        },
        {
          "name": "params",
          "type": "resource",
          "resource": "inputParams"
        }
      ],
      "outputs": [
        {
          "name": "params",
          "type": "resource",
          "resource": "outputParams"
        }
      ]
    }
  ],
  "resources": [
    {
      "name": "data",
      "title": "Data",
      "description": "Input data",
      "profile": "tabular-data-resource",
      "data": [],
      "schema": {
        "primaryKey": "x",
        "fields": [
          {
            "name": "x",
            "type": "number",
            "title": "",
            "unit": ""
          },
          {
            "name": "y",
            "type": "number",
            "title": "",
            "unit": ""
          }
        ]
      }
    },
    {
      "name": "inputParams",
      "title": "Input parameters",
      "description": "Initial parameter values",
      "profile": "parameter-data-resource",
      "data": {
        "k": {
          "vary": true,
          "value": 100,
          "lowerBound": 0,
          "upperBound": "Infinity"
        }
      },
      "schema": {
        "keys": [
          {
            "name": "k",
            "unit": "M^{-1}",
            "fields": [
              {
                "name": "vary",
                "title": "Vary",
                "type": "boolean"
              },
              {
                "name": "value",
                "title": "Value",
                "type": "number"
              },
              {
                "name": "lowerBound",
                "title": "Lower bound",
                "type": "number"
              },
              {
                "name": "upperBound",
                "title": "Upper bound",
                "type": "number"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "outputParams",
      "title": "Optimised parameters",
      "description": "Optimised parameter values",
      "profile": "parameter-data-resource"
    }
  ],
  "views": [
    {
      "name": "data",
      "specType": "opendatafit-csv",
      "spec": {},
      "resources": [
        "data"
      ]
    },
    {
      "name": "params",
      "title": "Parameters",
      "specType": "opendatafit-params",
      "spec": {
        "keys": [
          {
            "name": "k"
          }
        ]
      },
      "resources": [
        "inputParams",
        "outputParams"
      ]
    }
  ],
  "displays": [
    {
      "name": "main",
      "algorithms": [
        "nmr11"
      ],
      "layout": {
        "type": "bindfit",
        "spec": {
          "panes": [
            {
              "name": "control",
              "tabs": [
                "data",
                "params"
              ]
            },
            {
              "name": "main",
              "tabs": []
            }
          ],
          "tabs": [
            {
              "name": "data",
              "title": "Data",
              "icon": "",
              "views": [
                "data"
              ]
            },
            {
              "name": "params",
              "title": "Parameters",
              "icon": "",
              "views": [
                "params"
              ]
            }
          ]
        }
      }
    }
  ]
}